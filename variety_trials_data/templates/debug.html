{%extends "base.html"%}
{% block content%}
<body>
<p id="response"></p>
<table id ="debug"><th id="head"></th> </table>
</body>

{% endblock %}
{% block javascript %}
var x = 0;
var table = $("#debug")
var entryList = []
var cellList = [];

	
function cell(constructorParametersObject){
this.position = constructorParametersObject.pk;
this.tag = constructorParametersObject.type;
this.value=constructorParametersObject.value;
this.variety=constructorParametersObject.variety;
this.location = constructorParametersObject.location;
}




function processAjaxFunction(response_data) {
	if (response_data.length>0&&response_data){
	$("#response").text(x+"Response is " + response_data[0].fields.variety + ", or " + JSON.stringify(response_data));
	}
	x++
	for (var i in response_data ){
		//alert("Making a cell from "+JSON.stringify(response_data[i]));
		// add a new object to our array with push()
		cellList.push(new cell(response_data[i]));
		//alert("Made the cell "+JSON.stringify(cellList[i]));
	}
	if (x == 2)
	{
	table.append($("<tr id=>")
	.append($("<th>").text("The position of the returned JSON objects"))
	.append($("<td>").text(cellList[0].position))
	.append($("<td>").text(cellList[1].position)));
	}
	
}

function proofOfConcept(response_data) {
document.write(response_data)
if (response_data) {
if($("tr.v"+response_data[0].fields.variety).length==0){
table.append($("<tr class=v"+response_data[0].fields.variety+">").append($("<td class=l"+response_data[0].fields.location+">").text="v"+response_data[0].fields.variety))
}
else{
$("tr.v" + response_data[0].fields.variety).append($("<td class=l"+response_data[0].fields.location+">").text="v"+response_data[0].fields.variety)
}
// Checks for the location of the current response object in the headers, and places it there if it is now found
if($("#head > #l"+response_data[0].fields.location+"").length==0){
table.append($("#head").append(("<th id=l"+response_data[0].fields.location+">").text="l"+response_data[0].fields.location));
}
cellList.push(cell(response_data));
}
}

// for(i=1;i<100;i+=i)
// {
// var entry = {
// url: "/trial_entry/"+i+"/json",
// url: "/trial_entry/3/json",
// dataType: "json",
// data: {
	// "location":"location",
	// "key": "value"
	// },
// }
// entryList.push(entry)
// }
// for (i=0; i<entryList.length; i++){
	// $.ajax(entryList[i]).done(proofOfConcept)
	// }

// $.ajax(entry).done(proofOfConcept)
dajax.trial_entry(3)





	

{% endblock %}