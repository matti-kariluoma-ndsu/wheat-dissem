{%extends "base.html"%}
{% block content%}
<body>
<p id="response"></p>
<table id ="debug"></table>
</body>

{% endblock %}
{% block javascript %}

var table = $('#debug')

function cell(constructorParametersObject){
    this.position = constructorParametersObject.pk;
    this.tag = constructorParametersObject.type;
    this.value = constructorParametersObject.value;
	this.location = constructorParametersObject.location;
	this.variety = constructorParametersObject.variety;
	
}


var cellList = [];
var x =0;
function processAjaxFunction(response_data) {
	if (response_data.length>0&&response_data){
    $('#response').text(x+"Response is " + response_data[0].fields.variety + ", or " + JSON.stringify(response_data));
	}
	x++
    for (var i in response_data ){
        //alert("Making a cell from "+JSON.stringify(response_data[i]));
        /// add a new object to our array with push()
        cellList.push(new cell(response_data[i]));
        //alert("Made the cell "+JSON.stringify(cellList[i]));
	}
	if (x==2)
	{
	table.append($('<tr id=>')
	.append($('<th>').text("The position of the returned JSON objects"))
	.append($('<td>').text(cellList[0].position))
	.append($('<td>').text(cellList[1].position)));
	}
	
}
function proofOfConcept(response_data) {
var test=$('#'+response_data[0].fields.variety).length
if($('#'+response_data[0].fields.variety).length==0){
table.append($('<tr class='+response_data[0].fields.variety+'>').append($('<td id='+response_data[0].fields.location+'>').text(response_data[0].fields.location)))
}
else{
	$('tr.'+response_data[0].fields.variety).append($('<td id='+response_data[0].fields.location+'>').text(response_data[0].fields.location))
}
}

var entryList=[]
for(i=0;i<300;i++)
{
	var entry = {
		url: '/trial_entry/'+i+'/json',
		dataType: "json",
		data: {
			'location':'location',
			'key': 'value'
		},
}
entryList.push(entry)
}


for (i=0; i<entryList.length; i++){
	$.ajax(entryList[i]).done(proofOfConcept)
	}
{% endblock %}
